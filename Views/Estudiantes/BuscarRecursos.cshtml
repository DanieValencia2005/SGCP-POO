@model IEnumerable<SGCP_POO.Models.Recurso>

@{
    ViewData["Title"] = "Buscar recurso";
}

<main class="container mt-4">
    <h1 class="mb-4">Buscar recurso</h1>

    <div class="d-flex gap-2 mb-3">
        <a asp-controller="Estudiantes" asp-action="POO" class="btn btn-outline-primary">
            Volver a POO
        </a>
    </div>
    <section>
        <h4>Búsqueda avanzada</h4>
        <p class="text-muted">Utiliza los filtros para refinar los resultados:</p>

        <form asp-controller="Estudiantes" asp-action="BuscarRecursos" method="get" class="row g-3">
            <div class="col-md-4">
                <label for="tema" class="form-label">Tema</label>
                <select id="tema" name="tema" class="form-select">
                    <option value="">Seleccione...</option>
                    <option value="fundamentos" selected="@(ViewBag.Tema == "fundamentos")">Fundamentos</option>
                    <option value="clases" selected="@(ViewBag.Tema == "clases")">Clases</option>
                    <option value="objetos" selected="@(ViewBag.Tema == "objetos")">Objetos</option>
                    <option value="herencia" selected="@(ViewBag.Tema == "herencia")">Herencia</option>
                    <option value="polimorfismo" selected="@(ViewBag.Tema == "polimorfismo")">Polimorfismo</option>
                    <option value="abstraccion" selected="@(ViewBag.Tema == "abstraccion")">Abstracción</option>
                    <option value="encapsulamiento" selected="@(ViewBag.Tema == "encapsulamiento")">Encapsulamiento</option>
                    <option value="interfaces" selected="@(ViewBag.Tema == "interfaces")">Interfaces</option>
                    <option value="constructores" selected="@(ViewBag.Tema == "constructores")">Constructores</option>
                    <option value="metodos" selected="@(ViewBag.Tema == "metodos")">Métodos</option>
                    <option value="atributos" selected="@(ViewBag.Tema == "atributos")">Atributos</option>
                </select>

            </div>

            <div class="col-md-4">
                <label for="dificultad" class="form-label">Nivel de dificultad</label>
                <select id="dificultad" name="dificultad" class="form-select">
                    <option value="">Seleccione...</option>
                    <option value="alta" selected="@(ViewBag.Dificultad == "alta")">Alta</option>
                    <option value="media" selected="@(ViewBag.Dificultad == "media")">Media</option>
                    <option value="baja" selected="@(ViewBag.Dificultad == "baja")">Baja</option>
                </select>
            </div>

            <div class="col-md-4">
                <label for="formato" class="form-label">Formato del recurso</label>
                <select id="formato" name="formato" class="form-select">
                    <option value="">Seleccione...</option>
                    <option value="video" selected="@(ViewBag.Formato == "video")">Video</option>
                    <option value="articulo" selected="@(ViewBag.Formato == "articulo")">Artículo</option>
                    <option value="enlace" selected="@(ViewBag.Formato == "enlace")">Enlace</option>
                    <option value="documento" selected="@(ViewBag.Formato == "documento")">Documento</option>
                    <option value="ejemplo" selected="@(ViewBag.Formato == "ejemplo")">Ejemplo de código</option>
                    <option value="otro" selected="@(ViewBag.Formato == "otro")">Otro</option>
                </select>

            </div>

            <div class="col-12 mt-3">
                <button type="submit" class="btn btn-success">Buscar</button>
                <a asp-controller="Estudiantes" asp-action="BuscarRecursos"
                   class="btn btn-secondary">Limpiar</a>

            </div>
        </form>
    </section>

    <section class="mt-5">
        <h4>Resultados de la búsqueda</h4>
        <p class="text-muted">Aquí se mostrarán los recursos encontrados.</p>

        @if (Model != null && Model.Any())

        {
            <div class="list-group">
                @foreach (var recurso in Model)

                {
                    <div class="list-group-item mb-3 shadow-sm p-3 rounded-3 border-0" style="background-color: #f9f9f9;">

                        <h5 class="fw-bold text-primary mb-2">@recurso.Titulo</h5>

                        <p><strong>Descripción:</strong><br />@recurso.Descripcion</p>
                        <p><strong>Tema:</strong> @recurso.Tema</p>
                        <p><strong>Nivel de dificultad:</strong> @recurso.Dificultad</p>
                        <p><strong>Formato:</strong> @recurso.Formato</p>
                        <p><strong>Palabras clave:</strong> @recurso.PalabrasClave</p>

                        <div class="mt-3">
                            @if (!string.IsNullOrEmpty(recurso.Enlace))
                            {
                                <a href="@recurso.Enlace" target="_blank" class="btn btn-sm btn-outline-primary me-2">Ver recurso</a>
                            }
                            else
                            {
                                <button class="btn btn-sm btn-outline-secondary me-2" disabled>Sin enlace</button>
                            }

                            <a href="#" class="btn btn-sm btn-outline-success">Guardar recurso</a>
                        </div>

                    </div>
                }
            </div>
        }

        else

        {
            <div class="alert alert-info mt-4" role="alert">
                No se encontraron recursos con los filtros seleccionados.
            </div>
        }
    </section>
</main>
